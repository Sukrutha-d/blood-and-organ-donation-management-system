{% extends 'layout.html' %}
{% block content %}
<h3>Manage Contacts for Doctor: {{ doctor.Doctor_Name }} (ID: {{ doctor.Doctor_ID }})</h3>
<div class="card my-3">
  <div class="card-body">
    <form action="{{ url_for('doctor_contacts_add') }}" method="post" class="row g-2 align-items-end">
      <input type="hidden" name="doctor_id" value="{{ doctor.Doctor_ID }}">
      <div class="col-md-4"><input class="form-control" name="contact" placeholder="Contact number" required></div>
      <div class="col-md-2"><button class="btn btn-success">Add Contact</button></div>
      <div class="col-md-6"><a class="btn btn-secondary" href="{{ url_for('doctors') }}">Back</a></div>
    </form>
  </div>
</div>
<table class="table table-striped">
  <thead><tr><th>Contact</th><th>Actions</th></tr></thead>
  <tbody>
    {% for c in contacts %}
    <tr>
      <td>{{ c.Contact_no }}</td>
      <td>
        <form action="{{ url_for('doctor_contacts_delete') }}" method="post" style="display:inline" onsubmit="return confirm('Delete contact?');">
          <input type="hidden" name="doctor_id" value="{{ doctor.Doctor_ID }}">
          <input type="hidden" name="contact" value="{{ c.Contact_no }}">
          <button class="btn btn-sm btn-danger">Delete</button>
        </form>
      </td>
    </tr>
    {% else %}
    <tr><td colspan="2" class="text-muted">No contacts found.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
